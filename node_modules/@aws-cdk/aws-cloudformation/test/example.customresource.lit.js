"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const lambda = require("@aws-cdk/aws-lambda");
const core_1 = require("@aws-cdk/core");
const lib_1 = require("../lib");
class CopyOperation extends core_1.Construct {
    constructor(parent, name, props) {
        super(parent, name);
        const lambdaProvider = new lambda.SingletonFunction(this, 'Provider', {
            uuid: 'f7d4f730-4ee1-11e8-9c2d-fa7ae01bbebc',
            runtime: lambda.Runtime.PYTHON_3_7,
            code: lambda.Code.fromAsset('../copy-handler'),
            handler: 'index.handler',
            timeout: core_1.Duration.seconds(60),
        });
        new lib_1.CustomResource(this, 'Resource', {
            provider: lib_1.CustomResourceProvider.lambda(lambdaProvider),
            properties: {
                sourceBucketArn: props.sourceBucket.bucketArn,
                targetBucketArn: props.targetBucket.bucketArn,
            }
        });
    }
}
/// !hide
new CopyOperation(new core_1.Stack(), 'Test', {
    sourceBucket: { bucketArn: 'x' },
    targetBucket: { bucketArn: 'y' },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhhbXBsZS5jdXN0b21yZXNvdXJjZS5saXQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJleGFtcGxlLmN1c3RvbXJlc291cmNlLmxpdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDhDQUErQztBQUMvQyx3Q0FBMkQ7QUFDM0QsZ0NBQWdFO0FBWWhFLE1BQU0sYUFBYyxTQUFRLGdCQUFTO0lBQ25DLFlBQVksTUFBaUIsRUFBRSxJQUFZLEVBQUUsS0FBeUI7UUFDcEUsS0FBSyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztRQUVwQixNQUFNLGNBQWMsR0FBRyxJQUFJLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFO1lBQ3BFLElBQUksRUFBRSxzQ0FBc0M7WUFDNUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVTtZQUNsQyxJQUFJLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsaUJBQWlCLENBQUM7WUFDOUMsT0FBTyxFQUFFLGVBQWU7WUFDeEIsT0FBTyxFQUFFLGVBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1NBQzlCLENBQUMsQ0FBQztRQUVILElBQUksb0JBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFO1lBQ25DLFFBQVEsRUFBRSw0QkFBc0IsQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDO1lBQ3ZELFVBQVUsRUFBRTtnQkFDVixlQUFlLEVBQUUsS0FBSyxDQUFDLFlBQVksQ0FBQyxTQUFTO2dCQUM3QyxlQUFlLEVBQUUsS0FBSyxDQUFDLFlBQVksQ0FBQyxTQUFTO2FBQzlDO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztDQUNGO0FBQ0QsU0FBUztBQUVULElBQUksYUFBYSxDQUFDLElBQUksWUFBSyxFQUFFLEVBQUUsTUFBTSxFQUFFO0lBQ3JDLFlBQVksRUFBRSxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUU7SUFDaEMsWUFBWSxFQUFFLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRTtDQUNqQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbGFtYmRhID0gcmVxdWlyZSgnQGF3cy1jZGsvYXdzLWxhbWJkYScpO1xuaW1wb3J0IHsgQ29uc3RydWN0LCBEdXJhdGlvbiwgU3RhY2sgfSBmcm9tICdAYXdzLWNkay9jb3JlJztcbmltcG9ydCB7IEN1c3RvbVJlc291cmNlLCBDdXN0b21SZXNvdXJjZVByb3ZpZGVyIH0gZnJvbSAnLi4vbGliJztcblxuaW50ZXJmYWNlIElCdWNrZXQge1xuICByZWFkb25seSBidWNrZXRBcm46IHN0cmluZztcbn1cblxuLy8vICFzaG93XG5pbnRlcmZhY2UgQ29weU9wZXJhdGlvblByb3BzIHtcbiAgc291cmNlQnVja2V0OiBJQnVja2V0O1xuICB0YXJnZXRCdWNrZXQ6IElCdWNrZXQ7XG59XG5cbmNsYXNzIENvcHlPcGVyYXRpb24gZXh0ZW5kcyBDb25zdHJ1Y3Qge1xuICBjb25zdHJ1Y3RvcihwYXJlbnQ6IENvbnN0cnVjdCwgbmFtZTogc3RyaW5nLCBwcm9wczogQ29weU9wZXJhdGlvblByb3BzKSB7XG4gICAgc3VwZXIocGFyZW50LCBuYW1lKTtcblxuICAgIGNvbnN0IGxhbWJkYVByb3ZpZGVyID0gbmV3IGxhbWJkYS5TaW5nbGV0b25GdW5jdGlvbih0aGlzLCAnUHJvdmlkZXInLCB7XG4gICAgICB1dWlkOiAnZjdkNGY3MzAtNGVlMS0xMWU4LTljMmQtZmE3YWUwMWJiZWJjJyxcbiAgICAgIHJ1bnRpbWU6IGxhbWJkYS5SdW50aW1lLlBZVEhPTl8zXzcsXG4gICAgICBjb2RlOiBsYW1iZGEuQ29kZS5mcm9tQXNzZXQoJy4uL2NvcHktaGFuZGxlcicpLFxuICAgICAgaGFuZGxlcjogJ2luZGV4LmhhbmRsZXInLFxuICAgICAgdGltZW91dDogRHVyYXRpb24uc2Vjb25kcyg2MCksXG4gICAgfSk7XG5cbiAgICBuZXcgQ3VzdG9tUmVzb3VyY2UodGhpcywgJ1Jlc291cmNlJywge1xuICAgICAgcHJvdmlkZXI6IEN1c3RvbVJlc291cmNlUHJvdmlkZXIubGFtYmRhKGxhbWJkYVByb3ZpZGVyKSxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgc291cmNlQnVja2V0QXJuOiBwcm9wcy5zb3VyY2VCdWNrZXQuYnVja2V0QXJuLFxuICAgICAgICB0YXJnZXRCdWNrZXRBcm46IHByb3BzLnRhcmdldEJ1Y2tldC5idWNrZXRBcm4sXG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbi8vLyAhaGlkZVxuXG5uZXcgQ29weU9wZXJhdGlvbihuZXcgU3RhY2soKSwgJ1Rlc3QnLCB7XG4gIHNvdXJjZUJ1Y2tldDogeyBidWNrZXRBcm46ICd4JyB9LFxuICB0YXJnZXRCdWNrZXQ6IHsgYnVja2V0QXJuOiAneScgfSxcbn0pOyJdfQ==